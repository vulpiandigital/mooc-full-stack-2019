{"version":3,"sources":["App.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/numbers.js","index.js"],"names":["notificationTimeOut","Filter","handleFilterNames","filterValue","clearFilter","onChange","value","id","type","onClick","PersonForm","addName","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","Persons","persons","filterNames","requestRemoveName","searchFor","RegExp","peopleToShow","filter","person","name","search","number","length","map","key","rows","Notification","message","clearNotification","content","className","baseUrl","axios","get","then","response","data","newPerson","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","setFilterValue","errorMessage","setErrorMessage","useEffect","numbersService","initialNumbers","clearTimeout","setTimeout","e","target","preventDefault","personObject","nameExists","forEach","window","confirm","catch","error","returnedPerson","concat","find","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1cdf11ef.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport numbersService from './services/numbers.js'\r\n\r\nlet notificationTimeOut\r\n\r\nconst App = () => {\r\n\tconst [ persons, setPersons ] = useState([])\r\n\tconst [ newName, setNewName ] = useState('')\r\n\tconst [ newNumber, setNewNumber ] = useState('')\r\n\tconst [ filterValue, setFilterValue ] = useState('')\r\n\tconst [ errorMessage, setErrorMessage ] = useState({ content: '', type: '' })\r\n\tconst filterNames = filterValue.length > 0 ? true : false\r\n\tconst handleNameChange = (e) => {\r\n\t\tsetNewName(e.target.value)\r\n\t}\r\n\tconst handleNumberChange = (e) => {\r\n\t\tsetNewNumber(e.target.value)\r\n\t}\r\n\tconst handleFilterNames = (e) => {\r\n\t\tsetFilterValue(e.target.value)\r\n\t}\r\n\tconst clearFilter = (e) => {\r\n\t\tsetFilterValue('')\r\n\t}\r\n\tconst addName = (e) => {\r\n\t\te.preventDefault()\r\n\t\tif ( newName.length > 0 ) {\r\n\t\t\tconst personObject = {\r\n\t\t\t\tname: newName,\r\n\t\t\t\tnumber: newNumber\r\n\t\t\t}\r\n\t\t\tlet nameExists = false\r\n\t\t\tpersons.forEach(person => {\r\n\t\t\t\tif ( person.name === newName ) { \r\n\t\t\t\t\tnameExists = true\r\n\t\t\t\t\tconst confirmUpdate = window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)\r\n\t\t\t\t\tif ( confirmUpdate ) {\r\n\t\t\t\t\t\tnumbersService\r\n\t\t\t\t\t\t\t.updateNumber(person.id, personObject)\r\n\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\tnumbersService\r\n\t\t\t\t\t\t\t\t\t.getNumbers()\r\n\t\t\t\t\t\t\t\t\t.then(initialNumbers => {\r\n\t\t\t\t\t\t\t\t\t\tsetPersons(initialNumbers)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetErrorMessage({ content: `Updated ${personObject.name}`, type: 'success'})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\t\tsetErrorMessage({ content: `${error.response.data.error}`, type: 'error'})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif ( !nameExists ) {\r\n\t\t\t\tnumbersService\r\n\t\t\t\t\t.addNumber(personObject)\r\n\t\t\t\t\t.then(returnedPerson => {\r\n\t\t\t\t\t\tsetPersons(persons.concat(returnedPerson))\r\n\t\t\t\t\t\tsetErrorMessage({ content: `Added ${personObject.name}`, type: 'success'})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tsetErrorMessage({ content: `${error.response.data.error}`, type: 'error'})\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tsetNewName('')\r\n\t\t\tsetNewNumber('')\r\n\t\t}\r\n\t}\r\n\tconst requestRemoveName = (id) => {\r\n\t\tconst person = persons.find(p => p.id === id), confirmRemove = window.confirm(`Delete ${person.name}?`)\r\n\t\tif ( confirmRemove ) {\r\n\t\t\tnumbersService\r\n\t\t\t\t.removeNumber(id)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tnumbersService\r\n\t\t\t\t\t\t.getNumbers()\r\n\t\t\t\t\t\t.then(initialNumbers => {\r\n\t\t\t\t\t\t\tsetPersons(initialNumbers)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tsetErrorMessage({ content: `Removed ${person.name}`, type: 'success'})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tsetErrorMessage({ content: `${person.name} has already been removed from the server`, type: 'error'})\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst clearNotification = () => {\r\n\t\tclearTimeout(notificationTimeOut)\r\n\t\tnotificationTimeOut = setTimeout(() => {\r\n\t\t\tsetErrorMessage({ content: '', type: '' })\r\n\t\t}, 4000)\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tnumbersService\r\n\t\t\t.getNumbers()\r\n\t\t\t.then(initialNumbers => {\r\n\t\t\t\tsetPersons(initialNumbers)\r\n\t\t\t})\r\n\t}, [])\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Phonebook</h1>\r\n\r\n\t\t\t<Notification message={errorMessage} clearNotification={clearNotification} />\r\n\r\n\t\t\t<Filter handleFilterNames={handleFilterNames} filterNames={filterNames} clearFilter={clearFilter} />\r\n\r\n\t\t\t<h2>Add an entry</h2>\r\n\t\t\t<PersonForm addName={addName} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber} />\r\n\r\n\t\t\t<h2>Numbers</h2>\r\n\t\t\t<Persons persons={persons} filterNames={filterNames} filterValue={filterValue} requestRemoveName={requestRemoveName} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default App","import React from 'react'\r\n\r\nconst Filter = ({ handleFilterNames, filterValue, clearFilter }) => (\r\n\t<form><p>Filter shown with <input onChange={handleFilterNames} value={filterValue} id=\"filterNames\" /> <button type=\"reset\" onClick={clearFilter}>Clear</button></p></form>\r\n)\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ addName, handleNameChange, handleNumberChange, newName, newNumber }) => (\r\n\t<form onSubmit={addName}>\r\n\t\t<div>name: <input onChange={handleNameChange} value={newName} /></div>\r\n\t\t<div>number: <input onChange={handleNumberChange} value={newNumber} /></div>\r\n\t\t<div><button type=\"submit\">Add</button></div>\r\n\t</form>\r\n)\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ persons, filterNames, filterValue, requestRemoveName }) => {\r\n\tconst rows = () => {\r\n\t\tlet searchFor = new RegExp(filterValue,'i'), peopleToShow = filterNames ? persons.filter(person => person.name.search(searchFor)>= 0 || person.number.search(searchFor) >= 0) : persons\r\n\t\tif ( persons.length > 0 ) {\r\n\t\t\treturn (\r\n\t\t\t\tpeopleToShow.map(person => <li key={person.name}>{person.name} {person.number} <button onClick={() => requestRemoveName(person.id) }>Delete</button></li> )\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<p>The phonebook is empty.</p>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\t\t\t\r\n\treturn (\r\n\t\t<ul>\r\n\t\t\t{ filterNames && \r\n\t\t\t<li><strong>Showing results matching \"{filterValue}\"</strong></li>\r\n\t\t\t}\r\n\t\t\t{rows()}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ message, clearNotification }) => {\r\n\tif ( message.content.length > 0 ) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className={message.type}>{message.content}</div>\r\n\t\t\t\t<script>\r\n\t\t\t\t\t(() => { clearNotification() }())\r\n\t\t\t\t</script>\r\n\t\t\t</>\r\n\t\t)\r\n\t} else {\r\n\t\treturn <></>\r\n\t}\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getNumbers = () => {\r\n\tconst request = axios.get(baseUrl)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst addNumber = (newPerson) => {\r\n\tconst request = axios.post(baseUrl, newPerson)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst updateNumber = (id, newPerson) => {\r\n\tconst request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst removeNumber = (id) => {\r\n\tconst request = axios.delete(`${baseUrl}/${id}`)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nexport default { getNumbers, addNumber, updateNumber, removeNumber }","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './App.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}