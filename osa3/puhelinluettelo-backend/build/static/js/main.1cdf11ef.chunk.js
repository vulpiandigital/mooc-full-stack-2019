(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),u=n(13),l=n.n(u),o=n(2),i=function(e){var t=e.handleFilterNames,n=e.filterValue,a=e.clearFilter;return c.a.createElement("form",null,c.a.createElement("p",null,"Filter shown with ",c.a.createElement("input",{onChange:t,value:n,id:"filterNames"})," ",c.a.createElement("button",{type:"reset",onClick:a},"Clear")))},m=function(e){var t=e.addName,n=e.handleNameChange,a=e.handleNumberChange,r=e.newName,u=e.newNumber;return c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,"name: ",c.a.createElement("input",{onChange:n,value:r})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{onChange:a,value:u})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add")))},s=function(e){var t=e.persons,n=e.filterNames,a=e.filterValue,r=e.requestRemoveName;return c.a.createElement("ul",null,n&&c.a.createElement("li",null,c.a.createElement("strong",null,'Showing results matching "',a,'"')),function(){var e=new RegExp(a,"i"),u=n?t.filter((function(t){return t.name.search(e)>=0||t.number.search(e)>=0})):t;return t.length>0?u.map((function(e){return c.a.createElement("li",{key:e.name},e.name," ",e.number," ",c.a.createElement("button",{onClick:function(){return r(e.id)}},"Delete"))})):c.a.createElement("p",null,"The phonebook is empty.")}())},f=function(e){var t=e.message,n=e.clearNotification;return t.content.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.type},t.content),c.a.createElement("script",null,"(() => ",n(),"())")):c.a.createElement(c.a.Fragment,null)},h=n(3),d=n.n(h),p="/api/persons",E=function(){return d.a.get(p).then((function(e){return e.data}))},b=function(e){return d.a.post(p,e).then((function(e){return e.data}))},v=function(e,t){return d.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){return d.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},N=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],l=Object(r.useState)(""),h=Object(o.a)(l,2),d=h[0],p=h[1],N=Object(r.useState)(""),y=Object(o.a)(N,2),w=y[0],j=y[1],O=Object(r.useState)(""),C=Object(o.a)(O,2),k=C[0],F=C[1],S=Object(r.useState)({content:"",type:""}),R=Object(o.a)(S,2),A=R[0],D=R[1],T=k.length>0;return Object(r.useEffect)((function(){E().then((function(e){u(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(f,{message:A,clearNotification:function(){clearTimeout(a),a=setTimeout((function(){D({content:"",type:""})}),4e3)}}),c.a.createElement(i,{handleFilterNames:function(e){F(e.target.value)},filterNames:T,clearFilter:function(e){F("")}}),c.a.createElement("h2",null,"Add an entry"),c.a.createElement(m,{addName:function(e){if(e.preventDefault(),d.length>0){var t={name:d,number:w},a=!1;n.forEach((function(e){e.name===d&&(a=!0,window.confirm("".concat(d," is already added to the phonebook, replace the old number with a new one?"))&&v(e.id,t).then((function(e){E().then((function(e){u(e)})),D({content:"Updated ".concat(t.name),type:"success"})})).catch((function(e){D({content:"".concat(e.response.data.error),type:"error"})})))})),a||b(t).then((function(e){u(n.concat(e)),D({content:"Added ".concat(t.name),type:"success"})})).catch((function(e){D({content:"".concat(e.response.data.error),type:"error"})})),p(""),j("")}},handleNameChange:function(e){p(e.target.value)},handleNumberChange:function(e){j(e.target.value)},newName:d,newNumber:w}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(s,{persons:n,filterNames:T,filterValue:k,requestRemoveName:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&g(e).then((function(e){E().then((function(e){u(e)})),D({content:"Removed ".concat(t.name),type:"success"})})).catch((function(e){D({content:"".concat(t.name," has already been removed from the server"),type:"error"})}))}}))};n(36);l.a.render(c.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1cdf11ef.chunk.js.map